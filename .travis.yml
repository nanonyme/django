language: python
python:
  - 2.6
  - 2.7
env:
  - DATABASE_URL=sqlite://test.db OTHER=sqlite://test.db
  - DATABASE_URL=mysql://root@localhost/myapp_test OTHER=mysql://root@localhost/myapp_other
  - DATABASE_URL=postgres://postgres@localhost/myapp_test OTHER=postgres://postgres@localhost/myapp_other
before_script:
  - mysql -e 'create database myapp_test;'; mysql -e 'create database myapp_other;'
  - psql -c 'create database myapp_test;' -U postgres; psql -c 'create database myapp_other;' -U postgres

script: python ./tests/runtests.py --settings=test_dburl --liveserver=localhost:8080-8099
install:
  - python setup.py install &> /dev/null
  - pip install -q --use-mirrors dj-database-url 
  - pip install -q --use-mirrors mysql-python
  - pip install -q --use-mirrors psycopg2
